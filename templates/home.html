{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}
{% if user.is_authenticated %}
  Hi {{ user.username }}!

<script>
(function() {
  var flickerAPI = "/api/check_in";
  $.get( flickerAPI)
    .done(function( data ) {
        $('#raw-text').text(JSON.stringify(data, null, 4));
    });
})();
</script>

  <p><a href="{% url 'logout' %}">logout</a></p>

<div class="span6">
  <table class="table table-striped table-condensed">
    <thead>
      <tr>
        <th style="min-width: 80px;">First name</th>
        <th style="min-width: 80px;">Last name</th>
        <th style="width:20px;">&nbsp;</th>
        <th style="width:20px;">&nbsp;</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="user in users">
        <td>{{ user.firstName }}</td>
        <td>{{ user.lastName }}</td>
        <td><a ng-click="editUser(user.id)" class="btn btn-small btn-primary">edit</a></td>
        <td><a ng-click="deleteUser(user.id)" class="btn btn-small btn-danger">delete</a></td>
      </tr>
    </tbody>
  </table>
  <a ng-click="createNewUser()" class="btn btn-small">create new user</a>
</div>

{% else %}
  <p>You are not logged in</p>
  <a href="{% url 'login' %}">login</a>
{% endif %}
<pre id="raw-text">
Text in a pre element
is displayed in a fixed-width
font, and it preserves
both      spaces and
line breaks
</pre>{% endblock %}